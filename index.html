<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¨ë¼ì¸ ì±„íŒ…</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f0f2f5;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        
        /* ê¸°í•˜í•™ì  ë°°ê²½ ë„í˜•ë“¤ */
        .bg-shape {
            position: absolute;
            opacity: 0.1;
            pointer-events: none;
        }
        .circle1 {
            width: 400px;
            height: 400px;
            border-radius: 50%;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            top: -200px;
            left: -200px;
        }
        .circle2 {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ec4899, #f43f5e);
            bottom: -150px;
            right: -150px;
        }
        .square1 {
            width: 200px;
            height: 200px;
            background: linear-gradient(135deg, #06b6d4, #3b82f6);
            transform: rotate(45deg);
            top: 10%;
            right: 10%;
        }
        .square2 {
            width: 150px;
            height: 150px;
            background: linear-gradient(135deg, #10b981, #14b8a6);
            transform: rotate(30deg);
            bottom: 15%;
            left: 8%;
        }
        .triangle {
            width: 0;
            height: 0;
            border-left: 100px solid transparent;
            border-right: 100px solid transparent;
            border-bottom: 173px solid #a78bfa;
            top: 50%;
            left: 5%;
            transform: rotate(20deg);
        }
        
        #root {
            width: 100%;
            max-width: 1200px;
            padding: 20px;
            position: relative;
            z-index: 1;
        }
    </style>
</head>
<body>
    <div class="bg-shape circle1"></div>
    <div class="bg-shape circle2"></div>
    <div class="bg-shape square1"></div>
    <div class="bg-shape square2"></div>
    <div class="bg-shape triangle"></div>
    
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ìš•ì„¤ í•„í„° ë¦¬ìŠ¤íŠ¸
        const profanityList = [
            'ì‹œë°œ', 'ì”¨ë°œ', 'ê°œìƒˆ', 'ë³‘ì‹ ', 'ì§€ë„', 'ì¢†', 'ì”¹', 'nigga', 
            'ë¯¸ì¹œ', 'ë˜ë¼ì´', 'ì—¼ë³‘', 'ì—¿', 'ê°œìì‹', 'ìƒˆë¼', 'ë…„', 
            'ì“°ë ˆê¸°', 'ê°œXX', 'ì¡´ë‚˜', 'fuck', 'shit', 'bitch', 'ass',
            'êº¼ì ¸', 'ì£½ì–´', 'ë©ì²­ì´', 'ë°”ë³´', 'ë“±ì‹ ', 'ë†ˆ', 'ë‡¬',
            'ì• ë¯¸', 'ì• ë¹„', 'í˜¸ë¡œ', 'ì°½ë…€', 'ì…', 'ë‹ˆì• ë¯¸', 'ëŠê¸ˆ'
        ];

        // ìš•ì„¤ í•„í„° í•¨ìˆ˜
        function filterProfanity(text) {
            let filtered = text;
            profanityList.forEach(word => {
                const regex = new RegExp(word, 'gi');
                filtered = filtered.replace(regex, (match) => '*'.repeat(match.length));
            });
            return filtered;
        }

        // ë¡œê·¸ì¸/íšŒì›ê°€ì… ì»´í¬ë„ŒíŠ¸
        function AuthScreen({ onLogin }) {
            const [isLogin, setIsLogin] = useState(true);
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');
            const [confirmPassword, setConfirmPassword] = useState('');
            const [error, setError] = useState('');
            const [loading, setLoading] = useState(false);

            const handleSubmit = async (e) => {
                e.preventDefault();
                setError('');
                setLoading(true);

                if (!username.trim() || !password.trim()) {
                    setError('ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    setLoading(false);
                    return;
                }

                if (username.length < 3) {
                    setError('ì•„ì´ë””ëŠ” 3ê¸€ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
                    setLoading(false);
                    return;
                }

                if (password.length < 4) {
                    setError('ë¹„ë°€ë²ˆí˜¸ëŠ” 4ê¸€ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
                    setLoading(false);
                    return;
                }

                try {
                    if (isLogin) {
                        // ë¡œê·¸ì¸
                        const result = await window.storage.get(`user:${username}`, true);
                        if (result && result.value) {
                            const userData = JSON.parse(result.value);
                            if (userData.password === password) {
                                onLogin(username);
                            } else {
                                setError('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                            }
                        } else {
                            setError('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.');
                        }
                    } else {
                        // íšŒì›ê°€ì…
                        if (password !== confirmPassword) {
                            setError('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                            setLoading(false);
                            return;
                        }

                        // ê¸°ì¡´ ì‚¬ìš©ì í™•ì¸
                        let userExists = false;
                        try {
                            const existingUser = await window.storage.get(`user:${username}`, true);
                            if (existingUser && existingUser.value) {
                                userExists = true;
                            }
                        } catch (err) {
                            // ì‚¬ìš©ìê°€ ì—†ìœ¼ë©´ ì •ìƒ
                            userExists = false;
                        }

                        if (userExists) {
                            setError('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.');
                            setLoading(false);
                            return;
                        }

                        const userData = {
                            username,
                            password,
                            joinedAt: new Date().toISOString()
                        };

                        const result = await window.storage.set(`user:${username}`, JSON.stringify(userData), true);
                        
                        if (result) {
                            alert('âœ… íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
                            setIsLogin(true);
                            setPassword('');
                            setConfirmPassword('');
                        } else {
                            setError('íšŒì›ê°€ì… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                        }
                    }
                } catch (err) {
                    console.error('ì¸ì¦ ì˜¤ë¥˜:', err);
                    if (isLogin) {
                        setError('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.');
                    } else {
                        setError('íšŒì›ê°€ì… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                    }
                }
                
                setLoading(false);
            };

            return (
                <div style={{
                    background: 'white',
                    borderRadius: '16px',
                    padding: '40px',
                    boxShadow: '0 4px 20px rgba(0,0,0,0.08)',
                    maxWidth: '420px',
                    margin: '0 auto',
                    border: '1px solid #e5e7eb'
                }}>
                    <h1 style={{
                        textAlign: 'center',
                        color: '#111827',
                        marginBottom: '8px',
                        fontSize: '28px',
                        fontWeight: '700'
                    }}>
                        ğŸ’¬ ì±„íŒ…
                    </h1>
                    <p style={{
                        textAlign: 'center',
                        color: '#6b7280',
                        marginBottom: '30px',
                        fontSize: '14px'
                    }}>
                        {isLogin ? 'ê³„ì •ì— ë¡œê·¸ì¸í•˜ì„¸ìš”' : 'ìƒˆ ê³„ì •ì„ ë§Œë“œì„¸ìš”'}
                    </p>

                    <div style={{
                        display: 'flex',
                        marginBottom: '30px',
                        borderRadius: '8px',
                        overflow: 'hidden',
                        background: '#f3f4f6',
                        padding: '4px'
                    }}>
                        <button
                            onClick={() => {
                                setIsLogin(true);
                                setError('');
                            }}
                            style={{
                                flex: 1,
                                padding: '12px',
                                border: 'none',
                                background: isLogin ? 'white' : 'transparent',
                                color: isLogin ? '#111827' : '#6b7280',
                                fontSize: '14px',
                                fontWeight: '600',
                                cursor: 'pointer',
                                transition: 'all 0.2s',
                                borderRadius: '6px',
                                boxShadow: isLogin ? '0 1px 3px rgba(0,0,0,0.1)' : 'none'
                            }}
                        >
                            ë¡œê·¸ì¸
                        </button>
                        <button
                            onClick={() => {
                                setIsLogin(false);
                                setError('');
                            }}
                            style={{
                                flex: 1,
                                padding: '12px',
                                border: 'none',
                                background: !isLogin ? 'white' : 'transparent',
                                color: !isLogin ? '#111827' : '#6b7280',
                                fontSize: '14px',
                                fontWeight: '600',
                                cursor: 'pointer',
                                transition: 'all 0.2s',
                                borderRadius: '6px',
                                boxShadow: !isLogin ? '0 1px 3px rgba(0,0,0,0.1)' : 'none'
                            }}
                        >
                            íšŒì›ê°€ì…
                        </button>
                    </div>

                    <form onSubmit={handleSubmit}>
                        <div style={{ marginBottom: '16px' }}>
                            <label style={{
                                display: 'block',
                                marginBottom: '8px',
                                fontSize: '13px',
                                fontWeight: '500',
                                color: '#374151'
                            }}>
                                ì•„ì´ë””
                            </label>
                            <input
                                type="text"
                                placeholder="3ê¸€ì ì´ìƒ ì…ë ¥"
                                value={username}
                                onChange={(e) => setUsername(e.target.value)}
                                style={{
                                    width: '100%',
                                    padding: '12px 14px',
                                    border: '1px solid #d1d5db',
                                    borderRadius: '8px',
                                    fontSize: '15px',
                                    outline: 'none',
                                    transition: 'border 0.2s',
                                    background: 'white'
                                }}
                                onFocus={(e) => e.target.style.borderColor = '#6366f1'}
                                onBlur={(e) => e.target.style.borderColor = '#d1d5db'}
                            />
                        </div>

                        <div style={{ marginBottom: '16px' }}>
                            <label style={{
                                display: 'block',
                                marginBottom: '8px',
                                fontSize: '13px',
                                fontWeight: '500',
                                color: '#374151'
                            }}>
                                ë¹„ë°€ë²ˆí˜¸
                            </label>
                            <input
                                type="password"
                                placeholder="4ê¸€ì ì´ìƒ ì…ë ¥"
                                value={password}
                                onChange={(e) => setPassword(e.target.value)}
                                style={{
                                    width: '100%',
                                    padding: '12px 14px',
                                    border: '1px solid #d1d5db',
                                    borderRadius: '8px',
                                    fontSize: '15px',
                                    outline: 'none',
                                    transition: 'border 0.2s',
                                    background: 'white'
                                }}
                                onFocus={(e) => e.target.style.borderColor = '#6366f1'}
                                onBlur={(e) => e.target.style.borderColor = '#d1d5db'}
                            />
                        </div>

                        {!isLogin && (
                            <div style={{ marginBottom: '16px' }}>
                                <label style={{
                                    display: 'block',
                                    marginBottom: '8px',
                                    fontSize: '13px',
                                    fontWeight: '500',
                                    color: '#374151'
                                }}>
                                    ë¹„ë°€ë²ˆí˜¸ í™•ì¸
                                </label>
                                <input
                                    type="password"
                                    placeholder="ë¹„ë°€ë²ˆí˜¸ ì¬ì…ë ¥"
                                    value={confirmPassword}
                                    onChange={(e) => setConfirmPassword(e.target.value)}
                                    style={{
                                        width: '100%',
                                        padding: '12px 14px',
                                        border: '1px solid #d1d5db',
                                        borderRadius: '8px',
                                        fontSize: '15px',
                                        outline: 'none',
                                        transition: 'border 0.2s',
                                        background: 'white'
                                    }}
                                    onFocus={(e) => e.target.style.borderColor = '#6366f1'}
                                    onBlur={(e) => e.target.style.borderColor = '#d1d5db'}
                                />
                            </div>
                        )}

                        {error && (
                            <div style={{
                                background: '#fef2f2',
                                color: '#dc2626',
                                padding: '12px',
                                borderRadius: '8px',
                                marginBottom: '16px',
                                fontSize: '13px',
                                border: '1px solid #fecaca'
                            }}>
                                {error}
                            </div>
                        )}

                        <button
                            type="submit"
                            disabled={loading}
                            style={{
                                width: '100%',
                                padding: '14px',
                                background: loading ? '#9ca3af' : '#6366f1',
                                color: 'white',
                                border: 'none',
                                borderRadius: '8px',
                                fontSize: '15px',
                                fontWeight: '600',
                                cursor: loading ? 'not-allowed' : 'pointer',
                                transition: 'background 0.2s',
                                boxShadow: '0 1px 2px rgba(0,0,0,0.05)'
                            }}
                            onMouseEnter={(e) => {
                                if (!loading) e.target.style.background = '#4f46e5';
                            }}
                            onMouseLeave={(e) => {
                                if (!loading) e.target.style.background = '#6366f1';
                            }}
                        >
                            {loading ? 'ì²˜ë¦¬ì¤‘...' : (isLogin ? 'ë¡œê·¸ì¸' : 'íšŒì›ê°€ì…')}
                        </button>
                    </form>
                </div>
            );
        }

        // ì±„íŒ… ì»´í¬ë„ŒíŠ¸
        function ChatScreen({ username, onLogout }) {
            const [messages, setMessages] = useState([]);
            const [inputMessage, setInputMessage] = useState('');
            const [onlineUsers, setOnlineUsers] = useState(new Set());
            const messagesEndRef = useRef(null);
            const lastMessageId = useRef(0);

            useEffect(() => {
                loadMessages();
                const interval = setInterval(loadMessages, 1000);
                return () => clearInterval(interval);
            }, []);

            useEffect(() => {
                updateOnlineStatus();
                const interval = setInterval(updateOnlineStatus, 5000);
                return () => clearInterval(interval);
            }, [username]);

            useEffect(() => {
                messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            }, [messages]);

            const loadMessages = async () => {
                try {
                    const result = await window.storage.get('chat:messages', true);
                    if (result && result.value) {
                        const msgs = JSON.parse(result.value);
                        setMessages(msgs);
                        if (msgs.length > 0) {
                            lastMessageId.current = msgs[msgs.length - 1].id;
                        }
                    }
                } catch (err) {
                    console.log('ë©”ì‹œì§€ ë¡œë“œ ëŒ€ê¸°ì¤‘...');
                }
            };

            const updateOnlineStatus = async () => {
                const now = Date.now();
                await window.storage.set(`online:${username}`, now.toString(), true);

                try {
                    const keys = await window.storage.list('online:', true);
                    if (keys && keys.keys) {
                        const users = new Set();
                        for (const key of keys.keys) {
                            try {
                                const result = await window.storage.get(key, true);
                                if (result && result.value) {
                                    const lastSeen = parseInt(result.value);
                                    if (now - lastSeen < 10000) {
                                        const user = key.replace('online:', '');
                                        users.add(user);
                                    }
                                }
                            } catch (err) {
                                // ì—ëŸ¬ ë¬´ì‹œ
                            }
                        }
                        setOnlineUsers(users);
                    }
                } catch (err) {
                    console.log('ì˜¨ë¼ì¸ ì‚¬ìš©ì ì—…ë°ì´íŠ¸ ì¤‘...');
                }
            };

            const sendMessage = async (e) => {
                e.preventDefault();
                if (!inputMessage.trim()) return;

                const filteredMessage = filterProfanity(inputMessage);
                const newMessage = {
                    id: Date.now(),
                    username,
                    text: filteredMessage,
                    timestamp: new Date().toISOString(),
                    isFiltered: filteredMessage !== inputMessage
                };

                let currentMessages = messages;
                try {
                    const result = await window.storage.get('chat:messages', true);
                    if (result && result.value) {
                        currentMessages = JSON.parse(result.value);
                    }
                } catch (err) {
                    currentMessages = [];
                }

                const updatedMessages = [...currentMessages, newMessage];
                
                if (updatedMessages.length > 100) {
                    updatedMessages.shift();
                }

                await window.storage.set('chat:messages', JSON.stringify(updatedMessages), true);
                setMessages(updatedMessages);
                setInputMessage('');
            };

            const formatTime = (timestamp) => {
                const date = new Date(timestamp);
                return date.toLocaleTimeString('ko-KR', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
            };

            return (
                <div style={{
                    display: 'flex',
                    gap: '20px',
                    height: '600px'
                }}>
                    {/* ì‚¬ì´ë“œë°” */}
                    <div style={{
                        width: '260px',
                        background: 'white',
                        borderRadius: '16px',
                        padding: '24px',
                        boxShadow: '0 4px 20px rgba(0,0,0,0.08)',
                        display: 'flex',
                        flexDirection: 'column',
                        border: '1px solid #e5e7eb'
                    }}>
                        <div style={{
                            marginBottom: '24px',
                            paddingBottom: '24px',
                            borderBottom: '1px solid #e5e7eb'
                        }}>
                            <div style={{
                                fontSize: '16px',
                                fontWeight: '600',
                                color: '#111827',
                                marginBottom: '12px',
                                display: 'flex',
                                alignItems: 'center',
                                gap: '8px'
                            }}>
                                <div style={{
                                    width: '10px',
                                    height: '10px',
                                    borderRadius: '50%',
                                    background: '#10b981'
                                }}></div>
                                {username}
                            </div>
                            <button
                                onClick={onLogout}
                                style={{
                                    width: '100%',
                                    padding: '10px',
                                    background: '#f3f4f6',
                                    color: '#374151',
                                    border: '1px solid #e5e7eb',
                                    borderRadius: '8px',
                                    cursor: 'pointer',
                                    fontSize: '13px',
                                    fontWeight: '500',
                                    transition: 'all 0.2s'
                                }}
                                onMouseEnter={(e) => {
                                    e.target.style.background = '#e5e7eb';
                                }}
                                onMouseLeave={(e) => {
                                    e.target.style.background = '#f3f4f6';
                                }}
                            >
                                ë¡œê·¸ì•„ì›ƒ
                            </button>
                        </div>

                        <div>
                            <div style={{
                                fontSize: '14px',
                                fontWeight: '600',
                                marginBottom: '16px',
                                color: '#374151',
                                display: 'flex',
                                alignItems: 'center',
                                gap: '8px'
                            }}>
                                <div style={{
                                    width: '8px',
                                    height: '8px',
                                    borderRadius: '50%',
                                    background: '#10b981'
                                }}></div>
                                ì˜¨ë¼ì¸ ({onlineUsers.size})
                            </div>
                            <div style={{
                                maxHeight: '400px',
                                overflowY: 'auto'
                            }}>
                                {Array.from(onlineUsers).map(user => (
                                    <div
                                        key={user}
                                        style={{
                                            padding: '10px 12px',
                                            background: user === username ? '#eff6ff' : '#f9fafb',
                                            borderRadius: '8px',
                                            marginBottom: '8px',
                                            fontSize: '13px',
                                            color: '#111827',
                                            fontWeight: user === username ? '500' : '400',
                                            border: '1px solid ' + (user === username ? '#bfdbfe' : '#f3f4f6')
                                        }}
                                    >
                                        {user === username ? `${user} (ë‚˜)` : user}
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* ì±„íŒ… ì˜ì—­ */}
                    <div style={{
                        flex: 1,
                        background: 'white',
                        borderRadius: '16px',
                        boxShadow: '0 4px 20px rgba(0,0,0,0.08)',
                        display: 'flex',
                        flexDirection: 'column',
                        overflow: 'hidden',
                        border: '1px solid #e5e7eb'
                    }}>
                        {/* í—¤ë” */}
                        <div style={{
                            padding: '20px 24px',
                            background: '#6366f1',
                            color: 'white',
                            fontSize: '18px',
                            fontWeight: '600',
                            display: 'flex',
                            alignItems: 'center',
                            gap: '10px'
                        }}>
                            ğŸ’¬ ì „ì²´ ì±„íŒ…ë°©
                        </div>

                        {/* ë©”ì‹œì§€ ëª©ë¡ */}
                        <div style={{
                            flex: 1,
                            overflowY: 'auto',
                            padding: '24px',
                            background: '#fafafa'
                        }}>
                            {messages.length === 0 ? (
                                <div style={{
                                    textAlign: 'center',
                                    color: '#9ca3af',
                                    marginTop: '50px',
                                    fontSize: '14px'
                                }}>
                                    ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì„œ ëŒ€í™”ë¥¼ ì‹œì‘í•˜ì„¸ìš”
                                </div>
                            ) : (
                                messages.map((msg) => (
                                    <div
                                        key={msg.id}
                                        style={{
                                            marginBottom: '16px',
                                            display: 'flex',
                                            justifyContent: msg.username === username ? 'flex-end' : 'flex-start'
                                        }}
                                    >
                                        <div style={{
                                            maxWidth: '70%'
                                        }}>
                                            {msg.username !== username && (
                                                <div style={{
                                                    fontSize: '12px',
                                                    color: '#6366f1',
                                                    fontWeight: '600',
                                                    marginBottom: '6px',
                                                    marginLeft: '4px'
                                                }}>
                                                    {msg.username}
                                                </div>
                                            )}
                                            <div style={{
                                                background: msg.username === username 
                                                    ? '#6366f1' 
                                                    : 'white',
                                                color: msg.username === username ? 'white' : '#111827',
                                                padding: '12px 16px',
                                                borderRadius: '12px',
                                                boxShadow: '0 1px 2px rgba(0,0,0,0.05)',
                                                wordWrap: 'break-word',
                                                border: msg.username === username ? 'none' : '1px solid #e5e7eb'
                                            }}>
                                                {msg.text}
                                                {msg.isFiltered && (
                                                    <div style={{
                                                        fontSize: '10px',
                                                        marginTop: '6px',
                                                        opacity: 0.8
                                                    }}>
                                                        âš ï¸ ë¶€ì ì ˆí•œ ì–¸ì–´ í•„í„°ë§ë¨
                                                    </div>
                                                )}
                                            </div>
                                            <div style={{
                                                fontSize: '11px',
                                                color: '#9ca3af',
                                                marginTop: '4px',
                                                marginLeft: '4px',
                                                textAlign: msg.username === username ? 'right' : 'left'
                                            }}>
                                                {formatTime(msg.timestamp)}
                                            </div>
                                        </div>
                                    </div>
                                ))
                            )}
                            <div ref={messagesEndRef} />
                        </div>

                        {/* ì…ë ¥ í¼ */}
                        <form
                            onSubmit={sendMessage}
                            style={{
                                padding: '20px 24px',
                                borderTop: '1px solid #e5e7eb',
                                display: 'flex',
                                gap: '12px',
                                background: 'white'
                            }}
                        >
                            <input
                                type="text"
                                value={inputMessage}
                                onChange={(e) => setInputMessage(e.target.value)}
                                placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
                                style={{
                                    flex: 1,
                                    padding: '12px 16px',
                                    border: '1px solid #d1d5db',
                                    borderRadius: '12px',
                                    fontSize: '14px',
                                    outline: 'none',
                                    transition: 'border 0.2s'
                                }}
                                onFocus={(e) => e.target.style.borderColor = '#6366f1'}
                                onBlur={(e) => e.target.style.borderColor = '#d1d5db'}
                            />
                            <button
                                type="submit"
                                style={{
                                    padding: '12px 28px',
                                    background: '#6366f1',
                                    color: 'white',
                                    border: 'none',
                                    borderRadius: '12px',
                                    fontSize: '14px',
                                    fontWeight: '600',
                                    cursor: 'pointer',
                                    transition: 'background 0.2s'
                                }}
                                onMouseEnter={(e) => e.target.style.background = '#4f46e5'}
                                onMouseLeave={(e) => e.target.style.background = '#6366f1'}
                            >
                                ì „ì†¡
                            </button>
                        </form>
                    </div>
                </div>
            );
        }

        // ë©”ì¸ ì•±
        function App() {
            const [currentUser, setCurrentUser] = useState(null);

            const handleLogin = (username) => {
                setCurrentUser(username);
            };

            const handleLogout = async () => {
                if (currentUser) {
                    try {
                        await window.storage.delete(`online:${currentUser}`, true);
                    } catch (err) {
                        console.log('ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ ì¤‘...');
                    }
                }
                setCurrentUser(null);
            };

            return (
                <div>
                    {!currentUser ? (
                        <AuthScreen onLogin={handleLogin} />
                    ) : (
                        <ChatScreen username={currentUser} onLogout={handleLogout} />
                    )}
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
